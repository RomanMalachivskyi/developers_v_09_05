package com.epam.lab.developers.game.map.unit;

import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

public class UnitStatus {


	private double codeMultiplier;//множник для швидкості написання коду, напряму залежить від настрою ситості і життя
	private double mood;		//настрій юніта, якщо ситість і здоровя нормальні
	private double food; 	// ситість юніта, залежить від кількості випитої кави і спожитої їжі
	private double health; 		//здоров'я, змінюється коли бються

	public static final String CODE_MULTIPLIER = "CODE_MULTIPLIER";
	public static final String MOOD = "MOOD";
	public static final String BELLYFULL= "BELLYFULL";
	public static final String HELTH = "HELTH";
//	
//	
//	
//	private double codeMultiplier;	//множник для швидкості написання коду, напряму залежить від настрою ситості і життя
//	private double mood;			//настрій юніта, якщо ситість і здоровя нормальні
//	private double bellyful; 		//ситість юніта, залежить від кількості випитої кави і зїдженої їжі
//	private double healt; 			//здоров'я, змінюється коли бються
//	
	private Map<String , UnitBuff> buffs=new HashMap<String , UnitBuff>(); 
	
	
	
	public UnitStatus() {
		this.food = 12;
		this.health = 13;
		this.codeMultiplier = 1;
		this.mood = 10;
	}
	
	public UnitStatus(double codeMultiplie, double mood, double bellyful, double healt ) {
		this.food = bellyful;
		this.health= healt;
		this.codeMultiplier= codeMultiplie;
		this.mood = mood;
	}
	
	
	
	public void addBuff(String name , UnitBuff buff){
		
		buffs.put(name, buff);
		
	}
	
	
	public Map<String , UnitBuff> getBuffs(){
		
		for(String name: this.buffs.keySet())
			checkTimeNoEnd(name);
		return buffs;
	}
	
	private void checkTimeNoEnd(String name){
		Date time=new Date() ;
		if (buffs.get(name).getStart().getTime()+buffs.get(name).getTimeToEnd()-time.getTime()<=0)
			buffs.remove(name);
	}


	public UnitBuff getBuff(String name) {
		
		return buffs.get(name);
		
		
	}

	public double getCodeMultiplier() {
		double tmpCodeMultiplauer=1;
		
		for(String name: this.buffs.keySet())			
			tmpCodeMultiplauer*=buffs.get(name).getBonus(this.CODE_MULTIPLIER);
		
		return codeMultiplier*tmpCodeMultiplauer;
	}

	
	public double getMood() {
		return mood;
	}

	public double getBellyful() {
		return food;
	}

	public void setBellyful(double bellyful) {
		this.food = bellyful;
	}

	public double getHealt() {
		return health;
	}

	public void setHealt(float healt) {
		this.health = healt;
	}
	
}
