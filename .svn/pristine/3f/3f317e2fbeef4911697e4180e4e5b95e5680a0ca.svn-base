var youName="";
var oponentName = "";

$(function() {
	
	var divOpponents = $("#divOpponents");
	var divPlayerYou = $("#divPlayerYou");
	
	var listOfPlayers = function() {
		$.ajax({
			url:"get-game-data",
			contentType: "application/x-www-form-urlencoded",
			data: {"message" : "get_players"},
			success: function(youAndOpponents){
				var you = youAndOpponents[0];
				var opponents = youAndOpponents[1];
				
				youName = you.name;
				
				divPlayerYou.html("<img id=\"youPlayerImg\" src=\"resources/img/user/" + you.info.photo + "\" />" + you.name);
				divOpponents.html("");
				for (var i = 0; i < opponents.length; ++i) {
					divOpponents.append("<div class=\"divPlayerOpponents\">" +
							"<img class=\"opponentPlayerImg\" src=\"resources/img/user/"+
							opponents[i].info.photo + "\"/>" +
							opponents[i].name +
							"</div>");
				}
			}
		});
	};
	
	var timerWaiting = function(){
		$.ajax({
			url:"timer-waiting",
			success: function(isRunningGame) {
				
				
				if (isRunningGame){
//					str = "none";
//					str1 = $("#timerWaiting").css("display");
//					if(str1!=str) $("#timerWaiting").css("display","none");
//					if(str1!=str){
						setTimeout(function() {$("#timerWaiting").hide();},5000);
					//}
					//$("#timerWaiting").hide();
				}	
			}
		});
	};
 	var timerListOfPlayers = setInterval(function() {
		listOfPlayers();
		 timerWaiting();
	}, 1000);
	
	listOfPlayers();
	 timerWaiting();
});